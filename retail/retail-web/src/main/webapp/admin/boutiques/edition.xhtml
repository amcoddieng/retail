<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                template="/WEB-INF/template.xhtml">

    <f:metadata>
        <f:viewParam name="id" value="#{boutiqueBean.selectedBoutiqueId}" />
        <f:event type="preRenderView" listener="#{boutiqueBean.chargerBoutique}" />
    </f:metadata>

    <ui:define name="title">
        #{boutiqueBean.boutique.id == null ? 'Nouvelle boutique' : 'Modifier la boutique'}
    </ui:define>

    <ui:define name="content">
    <h:form id="form">
        <p:growl id="growl" showDetail="true" autoUpdate="true" />
        <p:messages id="messages" showDetail="true" autoUpdate="true" closable="true" />
        
        <p:panel header="#{boutiqueBean.boutique.id == null ? 'Nouvelle boutique' : 'Modifier la boutique'}" style="margin-bottom: 20px">
            <p:panelGrid columns="2" layout="grid" style="width: 100%" columnClasses="ui-g-12,ui-g-12">
                <p:outputLabel for="nom" value="Nom *" />
                <p:inputText id="nom" value="#{boutiqueBean.boutique.nom}" required="true" requiredMessage="Le nom est obligatoire" />
                
                <p:outputLabel for="adresse" value="Adresse *" />
                <p:inputTextarea id="adresse" value="#{boutiqueBean.boutique.adresse}" rows="3" required="true" requiredMessage="L'adresse est obligatoire" />
                
                <p:outputLabel for="codePostal" value="Code postal" />
                <p:inputText id="codePostal" value="#{boutiqueBean.boutique.codePostal}" />
                
                <p:outputLabel for="telephone" value="Téléphone *" />
                <p:inputText id="telephone" value="#{boutiqueBean.boutique.telephone}" required="true" requiredMessage="Le téléphone est obligatoire" />
                
                <p:outputLabel for="email" value="Email" />
                <p:inputText id="email" value="#{boutiqueBean.boutique.email}">
                    <f:validateRegex pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$" />
                </p:inputText>
                
                <p:outputLabel for="active" value="Active" />
                <p:selectBooleanCheckbox id="active" value="#{boutiqueBean.boutique.active}" />
            </p:panelGrid>
            
            <f:facet name="footer">
                <p:commandButton value="Enregistrer" action="#{boutiqueBean.enregistrer}" icon="pi pi-save" update="@form" />
                <p:button value="Retour" outcome="/admin/boutiques/liste" styleClass="ui-button-secondary" style="margin-left: 5px" />
            </f:facet>
        </p:panel>
        </h:form>
    </ui:define>
</ui:composition>
