<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

<h:head>
    <title>
        <ui:insert name="title">
            <h:outputText value="App"/>
        </ui:insert>
    </title>

    <h:outputStylesheet library="primefaces" name="primeicons/primeicons.css"/>
    <h:outputStylesheet library="css" name="app.css"/>
    <h:outputStylesheet library="css" name="theme-overrides.css"/>
</h:head>

<h:body>

    <p:progressBar widgetVar="ajaxbar" mode="indeterminate"
                   style="position:fixed;left:0;top:0;width:100%;height:3px;z-index:9998;display:none"/>

    <header class="topbar-compact">

        <h:link outcome="/home.xhtml" styleClass="logo">
            <i class="pi pi-shopping-cart mr-2"></i>Retail
        </h:link>

        <h:form id="topbarForm" rendered="#{loginBean.userLoggedIn}" styleClass="topbar-right">

            <p:commandButton icon="pi pi-sign-out"
                             value="DÃ©connexion"
                             action="#{loginBean.logout}"
                             styleClass="p-button-text p-button-danger p-button-sm"/>

        </h:form>
    </header>

    <div class="layout">
        <aside class="sidebar">
            <ui:include src="/WEB-INF/menu.xhtml"/>
        </aside>
        <main class="content">
            <p:growl id="growl" life="3000" showDetail="true" ariaLive="polite"/>
            <ui:insert name="content"/>
        </main>
    </div>

    <p:idleMonitor timeout="#{30 * 60 * 1000 - 60000}" onidle="PF('sessionWarn').show();"/>

    <p:dialog widgetVar="sessionWarn" header="Session"
              modal="true" closable="true" resizable="false">
        <p>Votre session va expirer dans 1 minute.</p>
        <p:commandButton value="Rester connectÃ©" onclick="location.reload();" type="button"/>
    </p:dialog>

    <h:outputScript library="js" name="ui-enhancements.js" target="body"/>
</h:body>
</html>